<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Blockly + BLE</title>
  <script src="blockly_compressed.js"></script>
  <script src="javascript_compressed.js"></script>
  <script src="blocks_compressed.js"></script>
  <script src="msg/js/en.js"></script> 
  <link rel="stylesheet" href="main.css">


  <style>
  
  </style>
</head>
<body>
<!--
  <h1><a href="https://developers.google.com/blockly/">Blockly</a> &gt;
    <a href="../index.html">Demos</a> &gt; Fixed Blockly</h1>
-->
  <div id="header">
    <p>Test Blockly 2.</p>
    <p>Robo Andando.</p>

    <p>
      <button id="connectButton"> Conectar </button>  
    </p> 

    <p>
     <button onclick="runCode()">Run Code</button>
    </p> 
  
  </div>
  
  <!-- Area do blockly -->
  <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>

  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
    <category name="Led">
      <block id="7" type="liga_led"></block>
    </category>
    <category name="Motor">
      <block id="" type="motor"></block>
    </category>
  </xml>

  <script> 
    //toolbox na workspace
    var workspace = Blockly.inject('blocklyDiv',
        {media: '../../media/',
         toolbox: document.getElementById('toolbox')});


    function runCode() {
      //window.LoopTrap = 1000;
      //Blockly.JavaScript.INFITE_LOOP_TRAP = 'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
      //var code_a = Blockly.JavaScript.workspaceToCode(workspace);      
      //Blockly.JavaScript.INFITE_LOOP_TRAP = null;
      Blockly.JavaScript.addReservedWords('code');
      var code = Blockly.JavaScript.workspaceToCode(workspace);      
      try{
        eval(code);
      } catch(e) {
        alert(e);
      }
      
    }     
  </script>

  <script src="workspace.js"></script> 
  <script src="main.js"></script>  

</body>
</html>
